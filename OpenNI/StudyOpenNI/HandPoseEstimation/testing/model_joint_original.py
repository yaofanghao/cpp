#coding=utf-8import caffeimport numpy as npimport matplotlib.pyplot as pltimport cv2import h5pyimport copydeploy = "deploy.prototxt"caffe_model = "mix.caffemodel"net = caffe.Net(deploy, caffe_model, caffe.TEST)for item in ['square', 'circle']:    for j in [1,4,9,16]:        testType = 'test_{}_{}%'.format(item, j)        h5pyImgSet = "/home/gtayx/caffe/examples/handPoseOriginal/testing/test_mix/" + testType + '.h5'        imgSet = h5py.File(h5pyImgSet, 'r')        depth = imgSet["depth"][:]        joint_h5 = []        for i in xrange(8000):            img = np.zeros([128,128])            img = depth[i,0,:,:]            transformer = caffe.io.Transformer({'data': net.blobs['data'].data.shape}) #设定图片的shape格式(1,1,128,128)            net.blobs['data'].data[...] = transformer.preprocess('data',img)      #执行上面设置的图片预处理操作，并将图片载入到blob中            #执行测试            out = net.forward()            joint= net.blobs['DeepHandModelxyz'].data[0].flatten()            joint_h5.append(joint.copy())        dset = h5py.File('h5data/predict_{}.h5'.format(testType), 'w')        dset['joint'] = np.asarray(joint_h5)        dset = h5py.File('h5data/predict_{}.h5'.format(testType), 'r')